<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario con validaciones</title>
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        input { display: block; margin-bottom: 10px; padding: 5px; }
        .error { color: red; font-size: 14px; margin-bottom: 10px; }
        table, th, td { border: 1px solid black; border-collapse: collapse; padding: 5px; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>Formulario</h1>

    <form id="miFormulario">
        <label>Nombre:</label>
        <input type="text" id="nombre">
        <div class="error" id="errorNombre"></div>

        <label>Apellido:</label>
        <input type="text" id="apellido">
        <div class="error" id="errorApellido"></div>

        <label>Edad:</label>
        <input type="number" id="edad">
        <div class="error" id="errorEdad"></div>

        <label>Teléfono:</label>
        <input type="text" id="telefono">
        <div class="error" id="errorTelefono"></div>

        <label>Contraseña:</label>
        <input type="password" id="contraseña">
        <div class="error" id="errorContraseña"></div>

        <button type="submit">Enviar</button>
    </form>

    <table id="tablaDatos" style="display:none;">
        <thead>
            <tr>
                <th>Nombre</th>
                <th>Apellido</th>
                <th>Edad</th>
                <th>Teléfono</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>

<script>
$(document).ready(function(){

    $("#miFormulario").submit(function(e){
        e.preventDefault(); // Evita que se envíe el formulario
        let valido = true;

        // Tomar valores
        let nombre = $("#nombre").val().trim();
        let apellido = $("#apellido").val().trim();
        let edad = $("#edad").val().trim();
        let telefono = $("#telefono").val().trim();
        let contraseña = $("#contraseña").val();

        // Reset de errores
        $(".error").text("");

        // Validar nombre
        if(nombre === "" || nombre.includes(" ")){
            $("#errorNombre").text("El nombre no puede estar vacío ni tener espacios.");
            valido = false;
        }

        // Validar apellido
        if(apellido === "" || apellido.includes(" ")){
            $("#errorApellido").text("El apellido no puede estar vacío ni tener espacios.");
            valido = false;
        }

        // Validar edad (número y mayor a 0)
        if(isNaN(edad) || edad < 1 || edad > 120){
            $("#errorEdad").text("Ingrese una edad válida (1-120).");
            valido = false;
        }

        // Validar teléfono (solo números y 7-15 dígitos)
        let regexTelefono = /^[0-9]{7,15}$/;
        if(!regexTelefono.test(telefono)){
            $("#errorTelefono").text("Ingrese un número de teléfono válido (7 a 15 dígitos).");
            valido = false;
        }

        // Validar contraseña
        if(contraseña.length <= 6){
            $("#errorContraseña").text("La contraseña debe tener más de 6 caracteres.");
            valido = false;
        }
        if(contraseña.toLowerCase().includes(nombre.toLowerCase()) || 
        contraseña.toLowerCase().includes(apellido.toLowerCase())){
            $("#errorContraseña").text("La contraseña no puede contener el nombre o apellido.");
            valido = false;
        }

        // Si todo está bien, mostrar datos en tabla
        if(valido){
            $("#tablaDatos").show();
            $("#tablaDatos tbody").html(`
                <tr>
                    <td>${nombre}</td>
                    <td>${apellido}</td>
                    <td>${edad}</td>
                    <td>${telefono}</td>
                </tr>
            `);
            $("#miFormulario")[0].reset();
        }
    });

});
</script>
</body>
</html>
